{"version":3,"file":"index.js","sources":["../src/js/mobile-menu.js","../src/js/api/http.js","../src/js/api/fetchArtist.js","../src/assets/icons.svg","../src/js/artists.js","../src/js/main.js"],"sourcesContent":["export function initMobileMenu() {\n  const openMenuBtn = document.querySelector('[data-menu-open]');\n  const closeMenuBtn = document.querySelector('[data-menu-close]');\n  const mobileMenu = document.querySelector('[data-menu]');\n\n  if (!openMenuBtn || !closeMenuBtn || !mobileMenu) return;\n\n  const toggleMenu = () => {\n    const isMenuOpen = mobileMenu.classList.toggle('is-open');\n    document.body.style.overflow = isMenuOpen ? 'hidden' : '';\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  mobileMenu.addEventListener('click', event => {\n    if (event.target.closest('.mobile-menu-link')) {\n      toggleMenu();\n    }\n  });\n}\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api/';\n\nasync function request(endpoint = '', options = {}, method = 'get') {\n  try {\n    const response = await axios({\n      url: endpoint,\n      method,\n      ...options,\n    });\n\n    return response.data;\n  } catch (error) {\n    handleError(error);\n    throw error;\n  }\n}\n\nfunction handleError(error) {\n  const status = error?.response?.status;\n\n  if (!error.response) {\n    console.error('Network error');\n\n    return;\n  }\n\n  if (status >= 500) {\n    console.error('Server error');\n  } else if (status === 404) {\n    console.error('Resource not found');\n  } else if (status === 400) {\n    console.error('Bad request');\n  } else {\n    console.error('Request failed');\n  }\n}\n\nexport const http = {\n  get: (endpoint, options = {}) => request(endpoint, options, 'get'),\n};\n","import { http } from './http';\n\nexport function fetchArtists({ page = 1, limit = 8 } = {}) {\n  return http.get('/artists', { params: { page, limit } });\n}\nexport function fetchArtistById(id) {\n  return http.get(`/artists/${id}`);\n}\nexport function fetchArtistAlbums(id) {\n  return http.get(`/artists/${id}/albums`);\n}\n","export default \"__VITE_ASSET__B$opHFQA__\"","import { fetchArtists } from './api/fetchArtist';\nimport iconsSprite from '../assets/icons.svg';\n\nconst artistsList = document.querySelector('.artists-list');\nconst loadMoreBtn = document.querySelector('.artists-load-more');\n\nlet currentPage = 1;\nconst CARDS_PER_PAGE = 8;\nconst MAX_PAGES = 10;\n\ninit();\n\nasync function init() {\n  try {\n    await loadArtists();\n  } catch (error) {\n    console.error('Помилка завантаження артистів:', error);\n  }\n}\n\nasync function loadArtists() {\n  try {\n    lockButton();\n\n    const data = await fetchArtists({\n      page: currentPage,\n      limit: CARDS_PER_PAGE,\n    });\n    const newArtists = data?.artists || [];\n\n    renderArtists(newArtists);\n\n    if (newArtists.length < CARDS_PER_PAGE || currentPage >= MAX_PAGES) {\n      showEndMessage();\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    console.error('Помилка:', error);\n    showLoadMoreBtn();\n  }\n}\n\nfunction renderArtists(artists) {\n  const markup = artists.map(createArtistCard).join('');\n  artistsList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createArtistCard(artist) {\n  const genreTags =\n    artist.genres\n      ?.slice(0, 4)\n      .map(genre => `<li class=\"artist-tag\">${genre}</li>`)\n      .join('') ||\n    `\n      <li class=\"artist-tag\">Alternative</li>\n      <li class=\"artist-tag\">Pop</li>\n      <li class=\"artist-tag\">Rock</li>\n      <li class=\"artist-tag\">Indie</li>\n    `;\n\n  const bio = artist.strBiographyEN || 'A talented artist.';\n  const description = bio.length > 150 ? bio.substring(0, 150) + '...' : bio;\n\n  return `\n    <li class=\"artist-card\">\n      <img src=\"${artist.strArtistThumb}\" \n           alt=\"${artist.strArtist}\" \n           class=\"artist-image\" \n           loading=\"lazy\"\n           onerror=\"this.src='./img/artists/placeholder.png'\">\n      <div class=\"artist-content\">\n        <ul class=\"artist-tags\">\n          ${genreTags}\n        </ul>\n        <div class=\"artist-info\">\n          <h3 class=\"artist-name\">${artist.strArtist}</h3>\n          <p class=\"artist-description\">${description}</p>\n        </div>\n      </div>\n      <button type=\"button\" class=\"artist-learn-more\" data-artist-id=\"${artist._id}\">\n        <span>Learn More</span>\n        <svg class=\"artist-icon\" width=\"24\" height=\"24\">\n           <use href=\"${iconsSprite}#icon-caret-right\"></use>\n        </svg>\n      </button>\n    </li>\n  `;\n}\n\nartistsList.addEventListener('click', e => {\n  const learnMoreBtn = e.target.closest('.artist-learn-more');\n\n  if (learnMoreBtn) {\n    const artistId = learnMoreBtn.dataset.artistId;\n    console.log('Learn More clicked, Artist ID:', artistId);\n  }\n});\n\nif (loadMoreBtn) {\n  loadMoreBtn.addEventListener('click', handleLoadMore);\n}\n\nasync function handleLoadMore() {\n  const previousCount = document.querySelectorAll('.artist-card').length;\n\n  currentPage += 1;\n\n  try {\n    await loadArtists();\n  } catch (error) {\n    console.error('Помилка при Load More:', error);\n    showLoadMoreBtn();\n    return;\n  }\n\n  setTimeout(() => {\n    const cards = document.querySelectorAll('.artist-card');\n    const firstNewCard = cards[previousCount];\n\n    if (firstNewCard) {\n      firstNewCard.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  }, 100);\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.innerHTML = `\n    <span>Load More</span>\n    <svg class=\"load-more-icon\" width=\"24\" height=\"24\">\n       <use href=\"${iconsSprite}#icon-down-arrow-alt\"></use>\n    </svg>\n  `;\n  loadMoreBtn.disabled = false;\n  loadMoreBtn.style.cursor = 'pointer';\n  loadMoreBtn.style.opacity = '1';\n  loadMoreBtn.style.display = 'flex';\n}\n\nfunction showEndMessage() {\n  loadMoreBtn.innerHTML = `\n    <span>Sorry, you have reached the limit.</span>\n  `;\n  loadMoreBtn.disabled = true;\n  loadMoreBtn.style.cursor = 'not-allowed';\n  loadMoreBtn.style.opacity = '0.6';\n}\n\nfunction lockButton() {\n  loadMoreBtn.disabled = true;\n  loadMoreBtn.style.cursor = 'not-allowed';\n  loadMoreBtn.style.opacity = '0.6';\n}\n","import { initMobileMenu } from './mobile-menu.js';\n\ninitMobileMenu();\n\n// Artists section\nimport './artists.js';\n"],"names":["initMobileMenu","openMenuBtn","closeMenuBtn","mobileMenu","toggleMenu","isMenuOpen","event","axios","request","endpoint","options","method","error","handleError","status","_a","http","fetchArtists","page","limit","iconsSprite","artistsList","loadMoreBtn","currentPage","CARDS_PER_PAGE","MAX_PAGES","init","loadArtists","lockButton","data","newArtists","renderArtists","showEndMessage","showLoadMoreBtn","artists","markup","createArtistCard","artist","genreTags","genre","bio","description","e","learnMoreBtn","artistId","handleLoadMore","previousCount","firstNewCard"],"mappings":"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"}